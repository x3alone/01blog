<div class="login-box register-box">
  <h2>Register</h2>
  <form (ngSubmit)="register()">

    <!-- Row 1: Credentials -->
    <div class="form-row">
      <div class="user-box">
        <input type="text" [(ngModel)]="username" name="username" required="">
        <label>Username</label>
      </div>
      <div class="user-box">
        <input type="password" [(ngModel)]="password" name="password" required="">
        <label>Password</label>
        @if (passwordError) {
        <p class="error-text">{{ passwordError }}</p>
        }
      </div>
    </div>

    <!-- Row 2: Name -->
    <div class="form-row">
      <div class="user-box">
        <input type="text" [(ngModel)]="firstName" name="firstName" required="">
        <label>First Name</label>
      </div>
      <div class="user-box">
        <input type="text" [(ngModel)]="lastName" name="lastName" required="">
        <label>Last Name</label>
      </div>
    </div>

    <!-- Row 3: Email & DOB -->
    <div class="form-row">
      <div class="user-box">
        <input type="email" [(ngModel)]="email" name="email" required="">
        <label>Email</label>
        @if (emailError) {
        <p class="error-text">{{ emailError }}</p>
        }
      </div>
      <div class="user-box date-box">
        <input type="date" [(ngModel)]="dateOfBirth" name="dateOfBirth" required="">
        <label class="static-label">Date of Birth</label>
      </div>
    </div>

    <!-- Optional Fields -->
    <div class="form-row">
      <div class="user-box static-box">
        <div style="display: flex; gap: 10px; margin-top: 10px; align-items: center;">
          <label class="upload-btn" style="position: relative; z-index: 10;">
            <input type="file" (change)="onFileSelected($event)" accept="image/*" style="display: none;">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="8.5" cy="8.5" r="1.5"></circle>
              <polyline points="21 15 16 10 5 21"></polyline>
            </svg>
            <span style="cursor: pointer;">Upload Avatar</span>
          </label>
          @if (avatarUrl) {
          <span style="color: #4ade80; font-size: 0.8rem; font-weight: bold;">Uploaded!</span>
          }
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="user-box static-box">
        <input type="text" [(ngModel)]="aboutMe" name="aboutMe">
        <label>About Me (Optional)</label>
      </div>
    </div>

    <!-- General Error Message (e.g. Server Errors) -->
    @if (registerError) {
    <p class="error-text main-error">{{ registerError }}</p>
    }

    <a href="javascript:void(0)" (click)="register()">
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      Register
    </a>

    <div class="register-link">
      Already have an account? <a routerLink="/login">Login</a>
    </div>
  </form>
</div>