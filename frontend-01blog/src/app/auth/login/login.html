<h2>Login</h2>
<!-- Display the server-side error message if loginError is set -->
<div *ngIf="loginError" class="error-message">
    {{ loginError }}
</div>

<!-- Form structure updated to handle validation (template-driven forms) -->
<form #loginForm="ngForm" (ngSubmit)="loginForm.valid && login()">
  <!-- Username Input (Min 4 chars) -->
  <input 
    [(ngModel)]="username" 
    name="username" 
    placeholder="Username (min 4 chars)" 
    required
    minlength="4"
    #usernameField="ngModel"
  />
  <div *ngIf="usernameField.invalid && (usernameField.dirty || usernameField.touched)" class="validation-error">
    <div *ngIf="usernameField.errors?.['required']">Username is required.</div>
    <div *ngIf="usernameField.errors?.['minlength']">Username must be at least 4 characters long.</div>
  </div>

  <!-- Password Input (Min 8 chars) -->
  <input 
    [(ngModel)]="password" 
    name="password" 
    type="password" 
    placeholder="Password (min 8 chars)" 
    required
    minlength="8"
    #passwordField="ngModel"
  />
  <div *ngIf="passwordField.invalid && (passwordField.dirty || passwordField.touched)" class="validation-error">
    <div *ngIf="passwordField.errors?.['required']">Password is required.</div>
    <div *ngIf="passwordField.errors?.['minlength']">Password must be at least 8 characters long.</div>
  </div>

  <button type="submit" [disabled]="!loginForm.valid">Login</button>
</form>
<p>Don't have an account? <a routerLink="/register">Register here</a></p>

<style>
  input {
    display: block;
    margin-bottom: 5px;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    width: 100%;
  }
  .error-message {
    padding: 10px;
    background-color: #fdd;
    border: 1px solid red;
    border-radius: 4px;
    color: #c00;
  }
  .validation-error {
    color: #e00; /* Darker red for validation errors */
    font-size: 0.85em;
    margin-bottom: 10px;
  }
  button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
</style>
