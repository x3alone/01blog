<div class="profile-page-wrapper">
  
  @if (isLoading()) {
    <div class="loading-message">Loading profile...</div>
  } @else if (profile()) {
    
    <div class="profile-card">
      
      <div class="profile-cover"></div>

      <div class="profile-content">
        
        <div class="header-section">
          
          <div class="avatar-actions-group">
            
            <div class="avatar-wrapper">
              <div class="profile-avatar">
                <span class="avatar-letter">
                  {{ profile()?.username?.charAt(0)?.toUpperCase() }}
                </span>
              </div>
              @if (profile()?.isBanned) {
                <span class="banned-badge">
                  BANNED
                </span>
              }
            </div>

            <div class="action-buttons-group">
              @if (!isOwnProfile()) {
                <button 
                  (click)="toggleFollow()"
                  [class]="profile()?.isFollowedByCurrentUser 
                    ? 'unfollow-btn' 
                    : 'follow-btn'"
                  class="action-button"
                >
                  {{ profile()?.isFollowedByCurrentUser ? 'Unfollow' : 'Follow' }}
                </button>
              }
              
              @if (profile()?.role === 'ADMIN') {
                <div class="admin-badge">
                  Admin
                </div>
              }
            </div>
          </div>

          <div class="profile-details-section">
            <div class="username-section">
              <h1 class="username-title">{{ profile()?.username }}</h1>
              <p class="join-date">Joined recently</p>
            </div>

            <div class="stats-bar">
              <div class="stat-item">
                <span class="stat-count">{{ profile()?.followingCount }}</span>
                <span class="stat-label">Following</span>
              </div>
              <div class="stat-item">
                <span class="stat-count">{{ profile()?.followersCount }}</span>
                <span class="stat-label">Followers</span>
              </div>
            </div>

            <div class="about-section">
              <h2 class="about-title">About</h2>
              <p class="about-text">
                {{ profile()?.about || 'This user has not written a bio yet.' }}
              </p>
            </div>

          </div>
        </div>
      </div>
    </div>

    <div class="posts-section">
      <h2 class="posts-title">Posts</h2>
      <div class="posts-placeholder">
        User's posts will appear here...
      </div>
    </div>

  } @else {
    <div class="not-found-message">User not found.</div>
  }
</div>